/*//////////////////////////////

    Custom CSS directives

//////////////////////////////*/

html, body {
    height: 100%;
    background-color: @gray-darker;
    .antialiased;
}

body {
    font-weight: 300;
}

a {
    .lh-transition( color @reflex @ease );

    &:hover,
    &:focus {
        text-decoration: none;
    }
}



//``````````````````````````````
//  Branding
//
#logo {
    
    &:hover, &:active {
        color: @brand-primary;
    }
}



//``````````````````````````````
//  Intro
//
#intro {
    position: absolute;
    left: 50%;
    top: 50%;
    margin: ( -1136px * @introScale / 2 ) ( -640px * @introScale / 2 );
    width:  (  640px * @introScale );
    height: ( 1136px * @introScale );
    .disable-user-select;
    
    //  frames in the moveable strip
    //  mostly text
    //
    .pane {
        padding: ( 60px * @introScale ) 0 0;
        font-size: 16px * 2 * @introScale;
        color: white;
        text-align: center;

        p {
            white-space: pre-line;
            margin: 0;
        }

        &:nth-child(n+2) p {
            margin-top: @font-size-base * @line-height-base / 2;
        }
    }

    //  bulleted nav indicator
    //
    .carousel >nav {
        bottom: 7%;
        height: 12px * @introScale;
        margin: ( -6px * @introScale ) 0;

        li { width: 12px * @introScale; }
        li +li { margin-left: 24px * @introScale; }
    }

    //  fixed phone wireframe
    //
    .intro-app-ui {
        top: 53%;
        width: 340px * @introScale;
        height: 719px * @introScale;
        margin: ( -719px * @introScale / 2 ) ( -340px * @introScale / 2 );
        border: ceil( 3px * @introScale ) solid @gray-dark;
        .lh-border-radius( 48px * @introScale );
        // pointer-events: none;
        
        #display {
            width: @introAppDisplayWidth;
            height: @introAppDisplayHeight;
            top: 50%;
            margin: ( -@introAppDisplayHeight / 2 ) ( -@introAppDisplayWidth / 2 );
            overflow: hidden;
            .lh-transform( translate3d(0,0,0) );
            // border: ceil( 1px * @introScale ) solid fade( @gray-dark, ( min( 100%, 100% * @introScale ) ) );
            // .lh-box-shadow(
            //     0 0 0 ceil( 2px * @introScale ) @gray-darker,
            //     0 0 0 ceil( ( 2px + 1px ) * @introScale ) fade( @gray-dark, ( min( 100%, 100% * @introScale ) ) )
            // );
            .lh-box-shadow( 0 0 0 ceil( 1px * @introScale ) fade( @gray-dark, ( min( 100%, 100% * @introScale ) ) ) );
        }
        
        &, #lock-button, #mute-button, #up-button, #down-button, #home-button, #camera, #mic, #receiver, #display {
            position: absolute;
            left: 50%;
        }

        #lock-button {
            width: 54px * @introScale;
            height: 4px * @introScale;
            top: ceil( -3px * @introScale * 2 );
            left: 228px * @introScale;
            background-color: @gray-dark;
        }

        #mute-button {
            width: 4px * @introScale;
            height: 34px * @introScale;
            top: 96px * @introScale;
            left: ceil( -3px * @introScale * 2 );
            background-color: @gray-dark;
        }

        #up-button {
            width: 4px * @introScale;
            height: 26px * @introScale;
            top: 164px * @introScale;
            left: ceil( -3px * @introScale * 2 );
            background-color: @gray-dark;
        }

        #down-button {
            width: 4px * @introScale;
            height: 26px * @introScale;
            top: 224px * @introScale;
            left: ceil( -3px * @introScale * 2 );
            background-color: @gray-dark;
        }

        #home-button {
            width: 64px * @introScale;
            height: 64px * @introScale;
            bottom: 50px * @introScale;
            margin: -32px * @introScale;
            border: ceil( 3px * @introScale ) solid @gray-dark;
            .lh-border-radius( 100% );
        }

        #camera {
            width: 12px * @introScale;
            height: 12px * @introScale;
            top: 36px * @introScale;
            margin: -6px * @introScale;
            background-color: @gray-dark;
            .lh-border-radius( 100% );
        }
        
        #mic {
            width: 6px * @introScale;
            height: 6px * @introScale;
            top: 60px * @introScale;
            margin: -3px * @introScale;
            margin-left: -48px * @introScale;
            background-color: @gray-dark;
            .lh-border-radius( ceil( 3px * @introScale ) );
        }
        
        #receiver {
            width: 58px * @introScale;
            height: 6px * @introScale;
            top: 60px * @introScale;
            margin: ( -3px * @introScale ) ( -29px * @introScale );
            background-color: @gray-dark;
            .lh-border-radius( ceil( 3px * @introScale ) );
        }
    }

    //  animated graphic app UI
    //
    #menubar {
        &, #app-name {
            height: 42px * @introScale;
            margin-bottom: 6px * @introScale;
        }

        #menu-toggle {
            width: 20px * @introScale;
            height: 14px * @introScale;
            margin: 14px * @introScale;
            float: left;

            svg {
                display: block;
            }
        }

        #app-name {
            float: left;
            width: 100%;
            margin-left: -48px * @introScale;
            line-height: 40px * @introScale;
            font-size: 22px * @introScale;
            font-weight: 500;
            color: @gray-dark;
            text-align: center;
        }
    }

    #feed {
        height: @feedHeight;
        padding: 0;
        margin: 0;
        overflow: hidden;

        li {
            display: block;
            overflow: hidden;
            height: ( 169px + 66px + 12px ) * @introScale;

            &.new {
                .lh-animation( incomingTrack .5s cubic-bezier( 0, .4, .6, 1 ) both );
                &.ng-leave { .lh-animation( none ); }
            }
            &.new-red {
                .track-imagery, .track-info .lines i              { .lh-animation( incomingTrackRedBgColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
                .track-info .avatar path, .track-info .heart path { .lh-animation( incomingTrackRedFillColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
            }
            &.new-green {
                .track-imagery, .track-info .lines i              { .lh-animation( incomingTrackGreenBgColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
                .track-info .avatar path, .track-info .heart path { .lh-animation( incomingTrackGreenFillColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
            }
            &.new-yellow {
                .track-imagery, .track-info .lines i              { .lh-animation( incomingTrackYellowBgColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
                .track-info .avatar path, .track-info .heart path { .lh-animation( incomingTrackYellowFillColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
            }
            &.new-blue {
                .track-imagery, .track-info .lines i              { .lh-animation( incomingTrackBlueBgColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
                .track-info .avatar path, .track-info .heart path { .lh-animation( incomingTrackBlueFillColor .715s cubic-bezier( 0, .4, .6, 1 ) both ); }
            }

            &.dispose-add { .lh-animation( outgoingTrack .5s cubic-bezier( 0, .4, .6, 1 ) both ); }
            
            &.scrolling { margin-top: @twoTracksPxToScroll; }
            &.scrolling-add { .lh-animation( digFeedByTwo 1.2s cubic-bezier( 0, .6, .3, 1 ) both ); }
            
            &.scrolling-one { margin-top: @oneTracksPxToScroll; }
            &.scrolling-one-add { .lh-animation( digFeedByOne .6s cubic-bezier( 0, .6, .3, 1 ) both ); }

            .track-imagery {
                position: relative;
                height: @trackImageryHeight;
                background-color: @gray-dark;
                .lh-transform( translate3d(0,0,0) );
                
                // background-image: url('/images/intro-track-imagery-pattern.svg');
                // background-repeat: repeat;
                // background-position: center top;
                // background-size: auto 100%;

                .play {
                    position: absolute;
                    left: 53%;
                    top: 50%;
                    width: 50px * @playTapScale * @introScale;
                    height: 50px * @playTapScale * @introScale;
                    margin: -25px * @playTapScale * @introScale;
                    .lh-transform( scale( 1 / @playTapScale ) );
                    background: url('/images/intro-play-btn.svg') no-repeat center top;
                    background-size: 100% auto;
                    visibility: hidden;

                    &.click-add-active { visibility: visible; }
                    &.click-add { .lh-animation( triggerTapPlay .6s cubic-bezier( .2, .2, .2, 1 ) both ); }

                }

                .remove {
                    position: absolute;
                    width: 40%;
                    height: 100%;
                    top: 0;
                    right: 0;
                    background-color: @brand-primary;
                    visibility: hidden;

                    &.swiped, &.swiped-remove-active { visibility: visible; }
                    &.swiped-add { .lh-animation( swipeRemove .2s cubic-bezier( .4, .4, .5, .9 ) both ); }
                    &.swiped-remove { .lh-animation( retreatRemove .2s cubic-bezier( .4, .4, .5, .9 ) both ); }

                    i, b {
                        display: block;
                        position: absolute;
                        left: 50%;
                        top: 50%;
                        width: 50px * @introScale;
                        height: 50px * @introScale;
                        margin: -25px * @introScale;
                        background: url('/images/intro-trash.svg') no-repeat center;
                        background-size: 100% auto;
                    }

                    b {
                        z-index: 1;
                        width: 50px * @introScale * @tapScale;
                        height: 50px * @introScale * @tapScale;
                        margin: -25px * @introScale * @tapScale;
                        visibility: hidden;
                    }

                    b.click-add-active { visibility: visible; }
                    b.click-add { .lh-animation( triggerTap .6s cubic-bezier( .2, .2, .2, 1 ) both ); }

                }
            }

            // &:nth-child( 1 ) .track-info .avatar { background-color: pink; }
            // &:nth-child( 2 ) .track-info .avatar { background-color: green; }
            // &:nth-child( 3 ) .track-info .avatar { background-color: yellow; }

            .track-info {
                height: 66px * @introScale;
                position: relative;
                .lh-transform( translate3d(0,0,0) );

                .avatar {
                    float: left;
                    width: 46px * @introScale;
                    height: 46px * @introScale;
                    margin: ( 10px * @introScale ) ( 16px * @introScale );
                    // background: url('/images/intro-avatar.svg') no-repeat center top;
                    // background-size: 100% auto;

                    svg {
                        display: block;
                    }

                    path {
                        fill: @gray-dark;
                    }
                }

                .lines {
                    float: left;
                    width: 100px * @introScale;
                    height: 26px * @introScale;
                    margin: ( 20px * @introScale ) ( 4px * @introScale );

                    i {
                        display: block;
                        height: 10px * @introScale;
                        background-color: @gray-dark;

                        &:nth-child(2) {
                            margin-top: 6px * @introScale;
                            width: 60%;
                        }
                    }
                }

                .heart {
                    position: absolute;
                    right: 20px * @introScale;
                    top: 20px * @introScale;
                    width: 26px * @introScale;
                    height: 26px * @introScale;
                    // background: url('/images/intro-heart-outline.svg') no-repeat center;
                    // background-size: 100% auto;

                    svg {
                        display: block;
                    }

                    path {
                        fill: @gray-dark;
                    }

                    i, b {
                        display: block;
                        position: absolute;
                        z-index: 1;
                        left: 0;
                        top: 0;
                        width: 100%;
                        height: 100%;
                        background: url('/images/intro-heart.svg') no-repeat center;
                        background-size: 100% auto;
                        visibility: hidden;
                    }

                    b {
                        z-index: 1;
                        height: 100% * @tapScale;
                        width: 100% * @tapScale;
                        margin: ( 100% - ( 100 * @tapScale ) ) / 2;
                    }

                    i.loved,
                    i.loved-remove-active,
                    b.beat-add-active { visibility: visible; }

                    i.loved-remove { .lh-animation( fadeOut .2s @ease both ); }
                    b.beat-add { .lh-animation( triggerTapHeart .6s cubic-bezier( .2, .2, .2, 1 ) both ); }

                }
            }
        }
    }

    #player {
        position: absolute;
        z-index: 1;
        left: 0;
        bottom: -12px * @introScale;
        height: @miniPlayerHeight;
        width: 100%;
        background-color: @gray-darkest;
        visibility: hidden;

        &.visible, &.visible-remove-active { visibility: visible; }
        &.visible-add { .lh-animation( popUpPlayer .3s linear both ); }
        &.visible-remove { .lh-animation( popDownPlayer .15s cubic-bezier( .6, 0, 1, .4 ) both ); }
        
        &.full, &.full-remove-active {
            height: @fullPlayerHeight;
            #track-video, #full-player-playing-info, #full-player-control { visibility: visible; }
            #track-video { height: @fullPlayerVideoHeight; }
            #mini-player-control { .lh-transform( translateY( -100% ) ); opacity: 0; }
            #full-player-playing-info, #full-player-control { .lh-transform( translateY( 0px ) ); opacity: 1; }
        }
        &.full-add {
            .lh-animation( maximizePlayer .5s cubic-bezier( 0, .4, .4, 1 ) both );
            #track-video { .lh-animation( maximizeVideo .5s cubic-bezier( 0, .4, .4, 1 ) both ); }
            #mini-player-control { .lh-animation( hideMiniPlayerControl .5s cubic-bezier( 0, .4, .4, 1 ) both ); }
            #full-player-playing-info { .lh-animation( showFullPlayerControl .4s cubic-bezier( 0, .4, .4, 1 ) .1s both ); }
            #full-player-control { .lh-animation( showFullPlayerControl .3s cubic-bezier( 0, .4, .4, 1 ) .2s both ); }
        }
        &.full-remove {
            .lh-animation( minimizePlayer .5s cubic-bezier( 0, .4, .4, 1 ) both );
            #track-video { .lh-animation( minimizeVideo .5s cubic-bezier( 0, .4, .4, 1 ) both ); }
            #mini-player-control { .lh-animation( showMiniPlayerControl .5s cubic-bezier( 0, .4, .4, 1 ) both ); }
            #full-player-playing-info { .lh-animation( hideFullPlayerControl .4s cubic-bezier( 0, .4, .4, 1 ) both ); }
            #full-player-control { .lh-animation( hideFullPlayerControl .3s cubic-bezier( 0, .4, .4, 1 ) both ); }
        }

        &.visible-remove.full-remove { .lh-animation( popDownFullPlayer .25s cubic-bezier( .6, 0, 1, .4 ) both ); }

        #track-video {
            position: relative;
            z-index: 1;
            height: @fullPlayerVideoHeight;
            background-color: @gray-darkest;
            overflow: hidden;
            visibility: hidden;
            height: 0;

            >div {
                width: 100%;
                height: @fullPlayerVideoHeight;
                position: relative;
            }

            //  “The min-height and min-width will
            //  allow the video to maintain it's
            //  aspect ratio ... any excess video
            //  bleeds off the side of the page.”
            //
            //  @see stackoverflow.com/a/15515336
            //
            video {
                position: absolute;
                bottom: 0;
                right: 0;
                min-width: 100%;
                min-height: 100%;
                width: auto;
                height: auto;
                overflow: hidden;
                background-color: @gray-darkest;
            }
        }

        #player-progress-bar {
            position: relative;
            z-index: 1;
            height: 6px * @introScale;
            margin: ( -3px * @introScale ) 0;
            background-color: @gray-darker;
            .lh-transform( translate3d(0,0,0) );

            #play-progress {
                height: 100%;
                background-color: @brand-primary;
                visibility: hidden;
                .lh-transform-origin( 0 );

                &.playing { visibility: visible; }
                &.playing-add { .lh-animation( playProgress 12s linear both ); }
            }
        }

        #mini-player-control {
            height: 60px * @introScale;
            position: relative;
        }

        #mini-player-btn {
            float: left;
            width: 40px * @introScale;
            height: 40px * @introScale;
            margin: ( 10px * @introScale ) ( 12px * @introScale );
            background: url('/images/intro-pause-btn.svg') no-repeat center;
            background-size: 100% auto;
        }

        #mini-playing-info {
            float: left;
            width: 100px * @introScale;
            height: 26px * @introScale;
            margin: ( 16px * @introScale ) ( 8px * @introScale );

            &:before, &:after {
                content: '';
                display: block;
                height: 10px * @introScale;
                background-color: @gray-darker;
            }

            &:after {
                margin-top: 6px * @introScale;
                width: 60%;
            }
        }

        #full-player-playing-info {
            width: 70%;
            height: 44px * @introScale;
            margin: ( -4px * @introScale ) auto 0;
            visibility: hidden;

            &:before, &:after {
                content: '';
                display: block;
                height: 16px * @introScale;
                background-color: @gray-darker;
                width: 90%;
            }

            &:after {
                margin-top: 12px * @introScale;
                width: 55%;
            }
        }

        #full-player-control {
            margin: ( 12px * @introScale ) auto 0;
            width: 70%;
            height: 120px * @introScale;
            visibility: hidden;

            #full-player-prev,
            #full-player-next,
            #full-player-btn {
                float: left;
                width: 15%;
                height: 100%;
                background: url('/images/intro-skip-backward.svg') no-repeat center;
                background-size: 100% auto;
                // background-color: fade( white, 5% );
            }
            #full-player-next {
                background-image: url('/images/intro-skip-forward.svg');
            }

            #full-player-btn {
                width: 70%;
                background: url('/images/intro-pause-btn.svg') no-repeat center;
                background-size: auto 100%;
                // background-color: fade( white, 10% );
            }
        }
    }
}



//``````````````````````````````
//  Views
//
.view.home {
    #intro {
        .box-shadow( 0 1px 4px rgba(0,0,0, 0.3) );
    }
}

.view.phone {
    background: url('/images/iPhone-5-white-silver.png') no-repeat center;
    background-size: auto ( 1620px * @introScale );
    position: relative;
    height: 100%;
    .lh-transform( translate3d(0,0,0) scale3d(1,1,1) );
    .lh-transform-style( preserve-3d );

    #backdrop {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: @gray-darker;
        
        video {
            width: 100%;
            height: 100%;
        }
    }

    .carousel {
        z-index: 1;
        overflow: hidden;
    }

    #ios-statusbar {
        display: none;
        position: absolute;
        z-index: 2;
        left: 0;
        top: 0;
        width: 100%;
        height: 40px * @introScale;
        pointer-events: none;
        // background: url('/images/ios7-statusbar-white.svg') no-repeat center top;
        // background-size: 100% auto;
    }

    #intro.with-statusbar {
        .carousel {
            >ul { padding: ( 110px * @introScale ) 0 0; }
            >div { top: 56%; }
            >nav { bottom: 5%; }
        }
        #ios-statusbar {
            display: block;
        }
    }
}



//``````````````````````````````
//  Forms
//
.form-control {
    padding: 6px 0;
    border-width: 0 0 1px 0;
    // border-color: white;
    
    .lh-placeholder( mix(@gray-light, @gray-lighter) );
}

label {
    span {
        display: none;
    }
}



